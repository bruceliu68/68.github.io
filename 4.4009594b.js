(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{102:function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(6),o=n.n(i),c=n(7),l=n.n(c),s=n(8),u=n.n(s),d=n(9),m=n.n(d),h=n(0),p=n.n(h),v=n(143),f=n.n(v),g=n(144),y=n.n(g),b=(n(55),n(56),function(e){function t(){var e;return r()(this,t),e=l()(this,u()(t).call(this)),f.a.setOptions({renderer:new f.a.Renderer,highlight:function(e){return y.a.highlightAuto(e).value},baseUrl:null,breaks:!1,gfm:!0,tables:!0,headerIds:!0,headerPrefix:"",langPrefix:"language-",mangle:!0,pedantic:!1,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}),e}return m()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.source,t=void 0===e?"":e;return p.a.createElement("div",{className:"m-markdown-render markdown-body",dangerouslySetInnerHTML:{__html:f()(t||"")}})}}]),t}(h.PureComponent));t.a=b},421:function(e,t,n){e.exports=n(31)(1)},80:function(e,t,n){"use strict";n.r(t);n(363);var i=n(87),a=n(5),o=n.n(a),r=n(6),c=n.n(r),l=n(7),u=n.n(l),s=n(8),d=n.n(s),m=n(37),h=n.n(m),p=n(9),v=n.n(p),f=n(15),g=n.n(f),y=(n(65),n(0)),b=n.n(y),E=n(95),C=(n(364),n(57),n(58),n(66),n(367),n(442)),O=(n(368),n(444)),k=(n(107),n(122)),w=(n(70),n(369)),j=(n(108),n(120)),P=(n(109),n(123)),x=(n(147),n(172)),S=(n(110),n(124));function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var M=function(e){function t(e){var r;return o()(this,t),r=u()(this,d()(t).call(this,e)),g()(h()(r),"handleCancel",function(){r.props.onCancel(),r.setState({address:"http://",title:null})}),g()(h()(r),"handleOk",function(){var e=r.state,t=e.address,n=e.title;if(!n)return k.a.warning("标题不能为空");if(!t)return k.a.warning("地址不能为空");var a="[".concat(n,"](").concat(t,' "').concat(n,'")');r.props.onOk({value:a,ch:a.length}),r.handleCancel()}),r.state={address:"http://",title:null},r}return v()(t,e),c()(t,[{key:"changeField",value:function(e,t){var n={};n[t]=e,this.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(n,!0).forEach(function(e){g()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n))}},{key:"render",value:function(){var t=this,e=this.state,n=e.address,a=e.title,r=this.props.visible;return b.a.createElement(j.a,{title:"添加链接",visible:r,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:4},"链接标题"),b.a.createElement(S.a,{span:20},b.a.createElement(x.a,{value:a,onChange:function(e){return t.changeField(e.target.value,"title")}}))),b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:4},"链接地址"),b.a.createElement(S.a,{span:20},b.a.createElement(x.a,{value:n,onChange:function(e){return t.changeField(e.target.value,"address")}}))))}}]),t}(y.PureComponent);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var F=function(e){function t(e){var r;return o()(this,t),r=u()(this,d()(t).call(this,e)),g()(h()(r),"handleCancel",function(){r.props.onCancel(),r.setState({address:"http://",title:null})}),g()(h()(r),"handleOk",function(){var e=r.state,t=e.address,n=e.title;if(!t)return k.a.warning("地址不能为空");var a="![".concat(n,"](").concat(t,' "').concat(n,'")');r.props.onOk({value:a,ch:a.length}),r.handleCancel()}),r.state={address:"http://",title:null},r}return v()(t,e),c()(t,[{key:"changeField",value:function(e,t){var n={};n[t]=e,this.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(n,!0).forEach(function(e){g()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n))}},{key:"render",value:function(){var t=this,e=this.state,n=e.address,a=e.title,r=this.props.visible;return b.a.createElement(j.a,{title:"添加图片",visible:r,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:4},"图片描述"),b.a.createElement(S.a,{span:20},b.a.createElement(x.a,{value:a,onChange:function(e){return t.changeField(e.target.value,"title")}}))),b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:4},"图片地址"),b.a.createElement(S.a,{span:20},b.a.createElement(x.a,{value:n,onChange:function(e){return t.changeField(e.target.value,"address")}}))))}}]),t}(y.PureComponent),L=(n(447),n(443)),N=(n(432),function(e){function n(e){var t;return o()(this,n),(t=u()(this,d()(n).call(this,e))).ref=b.a.createRef(),t}return v()(n,e),c()(n,[{key:"componentDidMount",value:function(){var t=this,e=this.ref.current,n=this.props.defaultCode,a=void 0===n?"":n;this.CodeMirrorEditor=E.fromTextArea(e,{mode:"text/javascript",theme:"material",lineNumbers:!0}),this.CodeMirrorEditor.setValue(a),this.CodeMirrorEditor.on("changes",function(e){t.props.onChange&&t.props.onChange(e.getValue())})}},{key:"componentDidUpdate",value:function(e){var t=e.defaultCode,n=this.props.defaultCode;t!==n&&this.CodeMirrorEditor.setValue(n)}},{key:"render",value:function(){return b.a.createElement("div",{className:"m-common-editor"},b.a.createElement("textarea",{ref:this.ref}))}}]),n}(y.PureComponent));function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var W=L.a.Option,A=function(e){function t(e){var r;return o()(this,t),r=u()(this,d()(t).call(this,e)),g()(h()(r),"handleCancel",function(){r.props.onCancel(),r.setState({code:"",codeLang:null})}),g()(h()(r),"handleOk",function(){var e=r.state,t=e.code,n=e.codeLang;if(!n)return k.a.warning("代码语言不能为空");var a="".concat("```").concat(n,"\n").concat(t,"\n").concat("```");r.props.onOk({value:a,ch:a.length}),r.handleCancel()}),r.state={code:"",codeLang:null,langList:[{name:"ASP",value:"asp"},{name:"Actionscript/Flash/Flex",value:"actionscript"},{name:"Bash/Bat",value:"bash"},{name:"CSS",value:"css"},{name:"C",value:"c"},{name:"C++",value:"cpp"},{name:"C#",value:"csharp"},{name:"Coffeescript",value:"coffeescript"},{name:"D",value:"d"},{name:"Dart",value:"dart"},{name:"Groovy",value:"groovy"},{name:"Html",value:"html"},{name:"Java",value:"java"},{name:"Json",value:"json"},{name:"Javascript",value:"javascript"},{name:"Lua",value:"lua"},{name:"Less",value:"less"},{name:"Markdown",value:"markdown"},{name:"Objective-c",value:"objective-c"},{name:"Php",value:"php"},{name:"Python",value:"python"},{name:"Ruby",value:"ruby"},{name:"SQL",value:"sql"},{name:"Sass/Scss",value:"sass"},{name:"Shell",value:"shell"},{name:"Swift",value:"swift"},{name:"VB",value:"vb"},{name:"XML",value:"xml"},{name:"Yaml",value:"yaml"},{name:"其他",value:""}]},r}return v()(t,e),c()(t,[{key:"changeField",value:function(e,t){var n={};n[t]=e,this.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(n,!0).forEach(function(e){g()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n))}},{key:"getCode",value:function(e){this.setState({code:e})}},{key:"render",value:function(){var t=this,e=this.state,n=e.codeLang,a=e.langList,r=this.props.visible;return b.a.createElement(j.a,{title:"添加代码块",width:700,visible:r,onOk:this.handleOk,onCancel:this.handleCancel},b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:3},"代码语言"),b.a.createElement(S.a,{span:20},b.a.createElement(L.a,{showSearch:!0,optionFilterProp:"children",dropdownMatchSelectWidth:!1,value:n||void 0,placeholder:"请选择语言",style:{width:200},onChange:function(e){return t.changeField(e,"codeLang")}},a.map(function(e,t){return b.a.createElement(W,{value:e.value,key:t},e.name)})))),b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:24},b.a.createElement(N,{defaultCode:"",onChange:function(e){return t.getCode(e)}}))))}}]),t}(y.PureComponent),B=(n(440),n(445)),J=(n(441),n(446));function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var U=function(e){function t(e){var s;return o()(this,t),s=u()(this,d()(t).call(this,e)),g()(h()(s),"handleCancel",function(){s.props.onCancel(),s.setState({row:3,col:2,align:1})}),g()(h()(s),"handleOk",function(){for(var e=s.state,t=e.row,n=e.col,a=e.align,r="|",i="|",o=0;o<n-1;o++)r="".concat(r," |"),1===a?i="".concat(i," ------------ |"):2===a?i="".concat(i," :------------ |"):3===a?i="".concat(i," :------------: |"):4===a&&(i="".concat(i," ------------: |"));for(var c="".concat(r,"\n").concat(i),l=0;l<t-2;l++)c="".concat(c,"\n").concat(r);s.props.onOk({value:c,ch:c.length}),s.handleCancel()}),s.state={row:3,col:2,align:1},s}return v()(t,e),c()(t,[{key:"changeField",value:function(e,t){var n={};n[t]=e,this.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(n,!0).forEach(function(e){g()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n))}},{key:"render",value:function(){var t=this,e=this.state,n=e.row,a=e.col,r=e.align,i=this.props.visible;return b.a.createElement(j.a,{title:"添加表格",visible:i,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:4},"单元格数"),b.a.createElement(S.a,{span:20},"行数",b.a.createElement(J.a,{style:{margin:"0 20px 0 10px"},min:3,value:n,onChange:function(e){return t.changeField(e,"row")}}),"列数",b.a.createElement(J.a,{style:{margin:"0 20px 0 10px"},min:1,value:a,onChange:function(e){return t.changeField(e,"col")}}))),b.a.createElement(P.a,{type:"flex",justify:"space-around",align:"middle",gutter:[0,{md:24}]},b.a.createElement(S.a,{span:4},"对齐方式"),b.a.createElement(S.a,{span:20},b.a.createElement(B.a.Group,{value:r,onChange:function(e){return t.changeField(e.target.value,"align")}},b.a.createElement(B.a,{value:1},"默认"),b.a.createElement(B.a,{value:2},"左对齐"),b.a.createElement(B.a,{value:3},"居中"),b.a.createElement(B.a,{value:4},"右对齐")))))}}]),t}(y.PureComponent),q=function(e){function n(e){var t;return o()(this,n),t=u()(this,d()(n).call(this,e)),g()(h()(t),"cancelModal",function(){t.setState({linkVisible:!1,picVisible:!1,codeVisible:!1,tableVisible:!1})}),g()(h()(t),"copy",function(){k.a.success("成功复制到剪切板")}),t.state={tags:[{name:"复制",value:"",icon:"biconfuzhi",flag:"copy"},{type:"vertical"},{name:"粗体",value:"****",icon:"biconcuti",ch:2},{name:"删除线",value:"~~~~",icon:"biconshanchuxian",ch:2},{name:"斜体",value:"**",icon:"biconxieti",ch:1},{name:"引用",value:"> ",icon:"biconyinyong",ch:2},{type:"vertical"},{name:"标题1",value:"# ",icon:"biconh3",ch:2},{name:"标题2",value:"## ",icon:"biconh",ch:3},{name:"标题3",value:"### ",icon:"biconh1",ch:4},{name:"标题4",value:"#### ",icon:"biconh11",ch:5},{name:"标题5",value:"##### ",icon:"biconh2",ch:6},{name:"标题6",value:"###### ",icon:"biconh1-copy-copy-copy-copy",ch:7},{type:"vertical"},{name:"无需列表",value:"- ",icon:"biconwuxuliebiao",ch:2},{name:"有序列表",value:"1. ",icon:"biconyouxuliebiao",ch:3},{name:"横线",value:"------------",icon:"biconhengxian",ch:12},{type:"vertical"},{name:"链接",value:"",icon:"biconlianjie",flag:"link"},{name:"添加图片",value:"",icon:"bicontubiao02",flag:"pic"},{name:"行内代码",value:"``",icon:"bicondaima",ch:1},{name:"代码块",value:"",icon:"bicondaima1",flag:"code"},{name:"表格",value:"",icon:"biconbiaoge",flag:"table"}],linkVisible:!1,picVisible:!1,codeVisible:!1,tableVisible:!1},t}return v()(n,e),c()(n,[{key:"clickTag",value:function(e){"link"===e.flag?this.setState({linkVisible:!0}):"pic"===e.flag?this.setState({picVisible:!0}):"code"===e.flag?this.setState({codeVisible:!0}):"table"===e.flag?this.setState({tableVisible:!0}):this.props.onClickTag(e)}},{key:"render",value:function(){var n=this,e=this.state,t=e.tags,a=e.linkVisible,r=e.picVisible,i=e.codeVisible,o=e.tableVisible,c=this.props.value;return b.a.createElement("div",{className:"m-markdown-editor-toolbar"},b.a.createElement("ul",null,t.map(function(e,t){return e.type?b.a.createElement("li",{className:"u-line"},b.a.createElement(C.a,{type:e.type,key:t})):"copy"===e.flag?b.a.createElement(w.CopyToClipboard,{text:c,onCopy:n.copy},b.a.createElement(O.a,{title:e.name,key:t},b.a.createElement("li",{className:"u-tag",onClick:function(){return n.clickTag(e)}},b.a.createElement("i",{className:"biconfont ".concat(e.icon)})))):b.a.createElement(O.a,{title:e.name,key:t},b.a.createElement("li",{className:"u-tag",onClick:function(){return n.clickTag(e)}},b.a.createElement("i",{className:"biconfont ".concat(e.icon)})))})),b.a.createElement(M,{visible:a,onCancel:this.cancelModal,onOk:function(e){return n.clickTag(e)}}),b.a.createElement(F,{visible:r,onCancel:this.cancelModal,onOk:function(e){return n.clickTag(e)}}),b.a.createElement(A,{visible:i,onCancel:this.cancelModal,onOk:function(e){return n.clickTag(e)}}),b.a.createElement(U,{visible:o,onCancel:this.cancelModal,onOk:function(e){return n.clickTag(e)}}))}}]),n}(y.PureComponent),z=function(e){function t(e){var n;return o()(this,t),n=u()(this,d()(t).call(this,e)),g()(h()(n),"clickTag",function(e){if(e.ch){var t=n.CodeMirrorEditor.getCursor();n.CodeMirrorEditor.replaceSelection(e.value),n.CodeMirrorEditor.setCursor(t.line,t.ch+e.ch),n.CodeMirrorEditor.focus()}}),n.ref=b.a.createRef(),n.state={value:null},n}return v()(t,e),c()(t,[{key:"componentDidMount",value:function(){var t=this,e=this.ref.current,n=this.props.defaultCode,a=void 0===n?"":n;this.CodeMirrorEditor=E.fromTextArea(e,{mode:"text/markdown",theme:"material",lineNumbers:!0}),this.CodeMirrorEditor.setValue(a),this.CodeMirrorEditor.on("changes",function(e){t.props.onChange&&(t.props.onChange(e.getValue()),t.setState({value:e.getValue()}))})}},{key:"componentDidUpdate",value:function(e){var t=e.defaultCode,n=this.props.defaultCode;t!==n&&(this.CodeMirrorEditor.setValue(n),this.setState({value:n}))}},{key:"render",value:function(){var e=this.state.value;return b.a.createElement("div",{className:"m-markdown-editor"},b.a.createElement("textarea",{ref:this.ref}),b.a.createElement(q,{value:e,onClickTag:this.clickTag}))}}]),t}(y.PureComponent),G=n(102),H=function(e){function t(){var e;return o()(this,t),e=u()(this,d()(t).call(this)),g()(h()(e),"getMousePos",function(e){var t=e||window.event;return{x:t.clientX,y:t.clientY}}),e.ref=b.a.createRef(),e.state={code:null,editorWidth:document.body.clientWidth/2,contextWidth:document.body.clientWidth/2,mouseDownFlag:!1},e}return v()(t,e),c()(t,[{key:"componentDidMount",value:function(){var n=this,e=this.ref.current,t=document.querySelector("body"),a=document.body.clientWidth;e.addEventListener("mousedown",function(){n.setState({mouseDownFlag:!0})}),t.addEventListener("mousemove",function(e){var t=n.getMousePos(e);n.state.mouseDownFlag&&(t.x<=100?n.setState({editorWidth:"100px",contextWidth:a-100+"px"}):a-t.x<=100?n.setState({editorWidth:a-100+"px",contextWidth:"100px"}):n.setState({editorWidth:t.x+"px",contextWidth:a-t.x+"px"}))}),t.addEventListener("mouseup",function(){n.setState({mouseDownFlag:!1}),console.log(1)})}},{key:"componentWillUnmount",value:function(){var e=this.ref.current,t=document.querySelector("body");e.removeEventListener("mousedown"),t.removeEventListener("mousemove"),t.removeEventListener("mouseup")}},{key:"goBack",value:function(){window.location.href="".concat(location.origin,"/tool/index")}},{key:"getCode",value:function(e){this.setState({code:e})}},{key:"render",value:function(){var t=this,e=this.state,n=e.code,a=e.editorWidth,r=e.contextWidth;return b.a.createElement("div",{className:"g-markdown"},b.a.createElement("div",{className:"header"},b.a.createElement("span",{className:"goback",onClick:function(){return t.goBack()}},b.a.createElement(i.a,{type:"left"}),"返回")),b.a.createElement("div",{className:"body"},b.a.createElement("div",{className:"editor",style:{width:a}},b.a.createElement(z,{defaultCode:"",onChange:function(e){return t.getCode(e)}})),b.a.createElement("div",{className:"drag-line",ref:this.ref,style:{left:a}}),b.a.createElement("div",{className:"context",style:{width:r}},b.a.createElement(G.a,{source:n}))))}}]),t}(y.PureComponent);t.default=H}}]);